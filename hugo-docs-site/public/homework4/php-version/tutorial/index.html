<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="/css/custom.css">
</head>
<body>
    <header>
        <h1>NKU 640 Documentation</h1>
        <nav>
            <ul>
                
                    <li><a href="/">Home</a></li>
                
                    <li><a href="/homework3/">Homework 3</a></li>
                
                    <li><a href="/homework4/">Homework 4</a></li>
                
                    <li><a href="/homework5/">Homework 5</a></li>
                
            </ul>
        </nav>
    </header>
    <main>
        <h1></h1>
<h1 id="todo-rest-api-tutorial">TODO REST API Tutorial</h1>
<p><strong>PHP Implementation with SQLite</strong></p>
<p>A Comprehensive Guide to Building Secure RESTful APIs</p>
<hr>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><strong>Overview &amp; Architecture</strong></li>
<li><strong>Authentication Flow</strong></li>
<li><strong>API Endpoints Overview</strong></li>
<li><strong>Detailed API Examples</strong></li>
<li><strong>Security Features</strong></li>
<li><strong>Testing &amp; Deployment</strong></li>
</ol>
<hr>
<h1 id="1-overview--architecture">1. Overview &amp; Architecture</h1>
<p>Understanding the TODO REST API System</p>
<hr>
<h2 id="project-overview">Project Overview</h2>
<p><strong>What is this API?</strong></p>
<ul>
<li>A secure REST API for managing TODO lists and tasks</li>
<li>Built with PHP 8.1+ and SQLite database</li>
<li>JWT-based authentication with token blacklisting</li>
<li>14+ endpoints covering authentication, lists, and tasks</li>
</ul>
<p><strong>Key Features:</strong></p>
<ul>
<li>✅ User authentication (signup, login, logout)</li>
<li>✅ CRUD operations for lists and tasks</li>
<li>✅ Bearer token authentication</li>
<li>✅ SQL injection prevention</li>
<li>✅ XSS protection</li>
<li>✅ Comprehensive unit tests (39 tests)</li>
</ul>
<hr>
<h2 id="architecture">Architecture</h2>
<pre tabindex="0"><code>┌─────────────┐      HTTP/JSON      ┌──────────────┐
│   Client    │ ──────────────────&gt; │  PHP Server  │
│ (Browser/   │                     │  (Router +   │
│  curl/etc)  │ &lt;────────────────── │  Controllers)│
└─────────────┘                     └──────┬───────┘
                                           │
                                           ▼
                                    ┌──────────────┐
                                    │   SQLite DB  │
                                    │   (todo.db)  │
                                    └──────────────┘
</code></pre><p><strong>Database Tables:</strong></p>
<ul>
<li><code>users</code> - User accounts (username, email, password hash)</li>
<li><code>lists</code> - TODO lists (name, description)</li>
<li><code>tasks</code> - Individual tasks (title, description, completed, etc.)</li>
<li><code>token_blacklist</code> - Invalidated JWT tokens</li>
</ul>
<hr>
<h2 id="tech-stack">Tech Stack</h2>
<table>
  <thead>
      <tr>
          <th>Component</th>
          <th>Technology</th>
          <th>Purpose</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Language</strong></td>
          <td>PHP 8.1+</td>
          <td>Server-side logic</td>
      </tr>
      <tr>
          <td><strong>Database</strong></td>
          <td>SQLite</td>
          <td>Data persistence</td>
      </tr>
      <tr>
          <td><strong>Authentication</strong></td>
          <td>JWT</td>
          <td>Stateless auth tokens</td>
      </tr>
      <tr>
          <td><strong>Password</strong></td>
          <td>bcrypt (cost 12)</td>
          <td>Secure password hashing</td>
      </tr>
      <tr>
          <td><strong>Web Server</strong></td>
          <td>PHP Built-in / NGINX</td>
          <td>HTTP handling</td>
      </tr>
      <tr>
          <td><strong>Testing</strong></td>
          <td>PHPUnit</td>
          <td>Unit testing</td>
      </tr>
      <tr>
          <td><strong>API Testing</strong></td>
          <td>Bruno / curl</td>
          <td>Manual testing</td>
      </tr>
  </tbody>
</table>
<hr>
<h1 id="2-authentication-flow">2. Authentication Flow</h1>
<p>JWT-based Authentication with Token Blacklisting</p>
<hr>
<h2 id="authentication-overview">Authentication Overview</h2>
<p><strong>What is JWT?</strong></p>
<ul>
<li><strong>J</strong>SON <strong>W</strong>eb <strong>T</strong>oken - industry standard for secure tokens</li>
<li>Contains user info + expiration + signature</li>
<li>Stateless (no server-side sessions needed)</li>
<li>Sent as <code>Authorization: Bearer &lt;token&gt;</code> header</li>
</ul>
<p><strong>Our Implementation:</strong></p>
<ul>
<li>Tokens expire after <strong>1 hour</strong> (configurable)</li>
<li>Passwords hashed with <strong>bcrypt</strong> (cost factor 12)</li>
<li>Tokens <strong>blacklisted on logout</strong> for security</li>
<li>Protected endpoints require valid, non-blacklisted token</li>
</ul>
<hr>
<h2 id="authentication-endpoints">Authentication Endpoints</h2>
<table>
  <thead>
      <tr>
          <th>Endpoint</th>
          <th>Method</th>
          <th>Protected</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>/api/v1/auth/signup</code></td>
          <td>POST</td>
          <td>No</td>
          <td>Create new account</td>
      </tr>
      <tr>
          <td><code>/api/v1/auth/login</code></td>
          <td>POST</td>
          <td>No</td>
          <td>Login and get token</td>
      </tr>
      <tr>
          <td><code>/api/v1/auth/logout</code></td>
          <td>POST</td>
          <td><strong>Yes</strong></td>
          <td>Logout and blacklist token</td>
      </tr>
      <tr>
          <td><code>/api/v1/users/profile</code></td>
          <td>GET</td>
          <td><strong>Yes</strong></td>
          <td>Get current user info</td>
      </tr>
  </tbody>
</table>
<p><strong>Protected = Requires <code>Authorization: Bearer &lt;token&gt;</code> header</strong></p>
<hr>
<h2 id="signup-example">Signup Example</h2>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X POST http://localhost:8000/api/v1/auth/signup <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;username&#34;: &#34;alice&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;email&#34;: &#34;alice@example.com&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;password&#34;: &#34;password123&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }&#39;</span>
</span></span></code></pre></div><p><strong>Response (201 Created):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;token&#34;</span>: <span style="color:#e6db74">&#34;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;user&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;a1b2c3d4-e5f6-7890-abcd-ef1234567890&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;alice&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;alice@example.com&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;createdAt&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T10:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h2 id="signup---validation-rules">Signup - Validation Rules</h2>
<p><strong>Username:</strong></p>
<ul>
<li>Required, 3-50 characters</li>
<li>Must be unique</li>
<li>Trimmed of whitespace</li>
</ul>
<p><strong>Email:</strong></p>
<ul>
<li>Required, valid email format</li>
<li>Must be unique</li>
<li>Trimmed of whitespace</li>
</ul>
<p><strong>Password:</strong></p>
<ul>
<li>Required, minimum 8 characters</li>
<li>Hashed with bcrypt before storage</li>
<li><strong>Never</strong> stored or returned in plain text</li>
</ul>
<p><strong>Error Responses:</strong></p>
<ul>
<li><code>400</code> - Validation error (missing/invalid fields)</li>
<li><code>409</code> - Username or email already exists</li>
<li><code>500</code> - Server error</li>
</ul>
<hr>
<h2 id="login-example">Login Example</h2>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X POST http://localhost:8000/api/v1/auth/login <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;username&#34;: &#34;alice&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;password&#34;: &#34;password123&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }&#39;</span>
</span></span></code></pre></div><p><strong>Response (200 OK):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;token&#34;</span>: <span style="color:#e6db74">&#34;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;user&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;a1b2c3d4-e5f6-7890-abcd-ef1234567890&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;alice&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;alice@example.com&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;createdAt&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T10:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Save this token!</strong> You&rsquo;ll need it for protected endpoints.</p>
<hr>
<h2 id="get-user-profile-example">Get User Profile Example</h2>
<p><strong>Request (with Bearer token):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>TOKEN<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>curl -X GET http://localhost:8000/api/v1/users/profile <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Authorization: Bearer </span>$TOKEN<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><p><strong>Response (200 OK):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;a1b2c3d4-e5f6-7890-abcd-ef1234567890&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;alice&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;email&#34;</span>: <span style="color:#e6db74">&#34;alice@example.com&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;createdAt&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T10:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;updatedAt&#34;</span>: <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Error Responses:</strong></p>
<ul>
<li><code>401</code> - Missing, invalid, expired, or blacklisted token</li>
<li><code>404</code> - User not found</li>
</ul>
<hr>
<h2 id="logout-example">Logout Example</h2>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>TOKEN<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;your-jwt-token-here&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>curl -X POST http://localhost:8000/api/v1/auth/logout <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Authorization: Bearer </span>$TOKEN<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><p><strong>Response (204 No Content):</strong></p>
<ul>
<li>Empty body</li>
<li>Token is now <strong>blacklisted</strong> and cannot be reused</li>
</ul>
<p><strong>What happens:</strong></p>
<ol>
<li>Token is added to <code>token_blacklist</code> database</li>
<li>Future requests with this token will get <code>401 Unauthorized</code></li>
<li>User must login again to get a new token</li>
</ol>
<hr>
<h2 id="token-blacklisting---why">Token Blacklisting - Why?</h2>
<p><strong>Problem Without Blacklisting:</strong></p>
<pre tabindex="0"><code>User logs in  ──&gt; Gets token (valid 1 hour)
User logs out ──&gt; Client deletes token
❌ Problem: If attacker copied the token,
            they can still use it!
</code></pre><p><strong>Solution With Blacklisting:</strong></p>
<pre tabindex="0"><code>User logs in  ──&gt; Gets token (valid 1 hour)
User logs out ──&gt; Token added to blacklist DB
✅ Solution: Even if attacker has token,
            server rejects it (blacklisted!)
</code></pre><p><strong>Security Benefits:</strong></p>
<ul>
<li>✅ Logout immediately invalidates token</li>
<li>✅ Stolen tokens can be blocked</li>
<li>✅ Can implement &ldquo;logout all devices&rdquo;</li>
</ul>
<hr>
<h1 id="3-api-endpoints-overview">3. API Endpoints Overview</h1>
<p>All 14 Endpoints at a Glance</p>
<hr>
<h2 id="complete-endpoint-list">Complete Endpoint List</h2>
<p><strong>Authentication (4 endpoints):</strong></p>
<ul>
<li>POST <code>/api/v1/auth/signup</code> - Create account</li>
<li>POST <code>/api/v1/auth/login</code> - Login</li>
<li>POST <code>/api/v1/auth/logout</code> ⚠️ - Logout (protected)</li>
<li>GET <code>/api/v1/users/profile</code> ⚠️ - Get profile (protected)</li>
</ul>
<p><strong>Lists (5 endpoints):</strong></p>
<ul>
<li>GET <code>/api/v1/lists</code> - Get all lists</li>
<li>POST <code>/api/v1/lists</code> - Create list</li>
<li>GET <code>/api/v1/lists/:id</code> - Get single list</li>
<li>PATCH <code>/api/v1/lists/:id</code> - Update list</li>
<li>DELETE <code>/api/v1/lists/:id</code> - Delete list</li>
</ul>
<hr>
<h2 id="complete-endpoint-list-cont">Complete Endpoint List (cont.)</h2>
<p><strong>Tasks (5 endpoints):</strong></p>
<ul>
<li>GET <code>/api/v1/lists/:listId/tasks</code> - Get tasks in list</li>
<li>POST <code>/api/v1/lists/:listId/tasks</code> - Create task</li>
<li>GET <code>/api/v1/tasks/:id</code> - Get single task</li>
<li>PATCH <code>/api/v1/tasks/:id</code> - Update task</li>
<li>DELETE <code>/api/v1/tasks/:id</code> - Delete task</li>
</ul>
<p><strong>Health Check (1 endpoint):</strong></p>
<ul>
<li>GET <code>/api/v1/health</code> - Check API health</li>
</ul>
<p>⚠️ = <strong>Protected</strong> (requires Bearer token)</p>
<hr>
<h1 id="4-detailed-api-examples">4. Detailed API Examples</h1>
<p>Lists &amp; Tasks CRUD Operations</p>
<hr>
<h2 id="health-check">Health Check</h2>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X GET http://localhost:8000/api/v1/health
</span></span></code></pre></div><p><strong>Response (200 OK):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;healthy&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;timestamp&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T23:48:15+00:00&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;service&#34;</span>: <span style="color:#e6db74">&#34;PHP TODO REST API&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;v1&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;checks&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;database&#34;</span>: {<span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;healthy&#34;</span>, <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Database connection successful&#34;</span>},
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;php&#34;</span>: {<span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;healthy&#34;</span>, <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;8.1.33&#34;</span>},
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;disk&#34;</span>: {<span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;healthy&#34;</span>, <span style="color:#f92672">&#34;free_space_mb&#34;</span>: <span style="color:#ae81ff">5629.3</span>},
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;memory&#34;</span>: {<span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;healthy&#34;</span>, <span style="color:#f92672">&#34;memory_limit&#34;</span>: <span style="color:#e6db74">&#34;128M&#34;</span>}
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Use case:</strong> Monitor API health and dependencies</p>
<hr>
<h2 id="get-all-lists">Get All Lists</h2>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X GET http://localhost:8000/api/v1/lists
</span></span></code></pre></div><p><strong>Response (200 OK):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;550e8400-e29b-41d4-a716-446655440000&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Groceries&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Weekly shopping list&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;createdAt&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T10:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;updatedAt&#34;</span>: <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;660e8400-e29b-41d4-a716-446655440001&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Work Tasks&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Q4 project deliverables&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;createdAt&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T11:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;updatedAt&#34;</span>: <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><hr>
<h2 id="create-list">Create List</h2>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X POST http://localhost:8000/api/v1/lists <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;name&#34;: &#34;Groceries&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;description&#34;: &#34;Weekly shopping list&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }&#39;</span>
</span></span></code></pre></div><p><strong>Response (201 Created):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;550e8400-e29b-41d4-a716-446655440000&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Groceries&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Weekly shopping list&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;createdAt&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T10:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;updatedAt&#34;</span>: <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Validation:</strong></p>
<ul>
<li><code>name</code>: Required, 1-255 chars, cannot be whitespace-only</li>
<li><code>description</code>: Optional, max 1000 chars</li>
</ul>
<hr>
<h2 id="get-single-list">Get Single List</h2>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X GET http://localhost:8000/api/v1/lists/550e8400-e29b-41d4-a716-446655440000
</span></span></code></pre></div><p><strong>Response (200 OK):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;550e8400-e29b-41d4-a716-446655440000&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Groceries&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Weekly shopping list&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;createdAt&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T10:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;updatedAt&#34;</span>: <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Error Responses:</strong></p>
<ul>
<li><code>400</code> - Invalid UUID format</li>
<li><code>404</code> - List not found</li>
</ul>
<hr>
<h2 id="update-list">Update List</h2>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X PATCH http://localhost:8000/api/v1/lists/550e8400-e29b-41d4-a716-446655440000 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;name&#34;: &#34;Updated Groceries&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;description&#34;: &#34;Monthly shopping list&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }&#39;</span>
</span></span></code></pre></div><p><strong>Response (200 OK):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;550e8400-e29b-41d4-a716-446655440000&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Updated Groceries&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Monthly shopping list&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;createdAt&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T10:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;updatedAt&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T11:30:00Z&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Note:</strong> All fields are optional, but at least one must be provided.</p>
<hr>
<h2 id="delete-list">Delete List</h2>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X DELETE http://localhost:8000/api/v1/lists/550e8400-e29b-41d4-a716-446655440000
</span></span></code></pre></div><p><strong>Response (204 No Content):</strong></p>
<ul>
<li>Empty body</li>
<li>List and <strong>all associated tasks</strong> are deleted</li>
</ul>
<p><strong>Error Responses:</strong></p>
<ul>
<li><code>400</code> - Invalid UUID format</li>
<li><code>404</code> - List not found</li>
</ul>
<p><strong>⚠️ Warning:</strong> This operation is permanent and cascades to tasks!</p>
<hr>
<h2 id="get-tasks-in-list">Get Tasks in List</h2>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X GET http://localhost:8000/api/v1/lists/550e8400-e29b-41d4-a716-446655440000/tasks
</span></span></code></pre></div><p><strong>Response (200 OK):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;660e8400-e29b-41d4-a716-446655440001&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;listId&#34;</span>: <span style="color:#e6db74">&#34;550e8400-e29b-41d4-a716-446655440000&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Buy milk&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;2 liters, skim&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;completed&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;dueDate&#34;</span>: <span style="color:#e6db74">&#34;2025-11-08T18:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;priority&#34;</span>: <span style="color:#e6db74">&#34;medium&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;categories&#34;</span>: [<span style="color:#e6db74">&#34;groceries&#34;</span>, <span style="color:#e6db74">&#34;dairy&#34;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;createdAt&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T10:05:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;updatedAt&#34;</span>: <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><hr>
<h2 id="create-task">Create Task</h2>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X POST http://localhost:8000/api/v1/lists/550e8400-e29b-41d4-a716-446655440000/tasks <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;title&#34;: &#34;Buy milk&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;description&#34;: &#34;2 liters, skim&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;dueDate&#34;: &#34;2025-11-08T18:00:00Z&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;priority&#34;: &#34;medium&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;categories&#34;: [&#34;groceries&#34;, &#34;dairy&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }&#39;</span>
</span></span></code></pre></div><p><strong>Validation:</strong></p>
<ul>
<li><code>title</code>: Required, 1-255 chars</li>
<li><code>description</code>: Optional, max 2000 chars</li>
<li><code>completed</code>: Optional, boolean (default: false)</li>
<li><code>dueDate</code>: Optional, ISO 8601 datetime</li>
<li><code>priority</code>: Optional, enum (&rsquo;low&rsquo;, &lsquo;medium&rsquo;, &lsquo;high&rsquo;)</li>
<li><code>categories</code>: Optional, array of strings (max 10, each max 50 chars)</li>
</ul>
<hr>
<h2 id="create-task-response">Create Task Response</h2>
<p><strong>Response (201 Created):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;660e8400-e29b-41d4-a716-446655440001&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;listId&#34;</span>: <span style="color:#e6db74">&#34;550e8400-e29b-41d4-a716-446655440000&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Buy milk&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;2 liters, skim&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;completed&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;dueDate&#34;</span>: <span style="color:#e6db74">&#34;2025-11-08T18:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;priority&#34;</span>: <span style="color:#e6db74">&#34;medium&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;categories&#34;</span>: [<span style="color:#e6db74">&#34;groceries&#34;</span>, <span style="color:#e6db74">&#34;dairy&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;createdAt&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T10:05:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;updatedAt&#34;</span>: <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Error Responses:</strong></p>
<ul>
<li><code>400</code> - Validation error or invalid UUID</li>
<li><code>404</code> - List not found</li>
<li><code>415</code> - Invalid Content-Type</li>
</ul>
<hr>
<h2 id="get-single-task">Get Single Task</h2>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X GET http://localhost:8000/api/v1/tasks/660e8400-e29b-41d4-a716-446655440001
</span></span></code></pre></div><p><strong>Response (200 OK):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;660e8400-e29b-41d4-a716-446655440001&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;listId&#34;</span>: <span style="color:#e6db74">&#34;550e8400-e29b-41d4-a716-446655440000&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Buy milk&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;2 liters, skim&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;completed&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;dueDate&#34;</span>: <span style="color:#e6db74">&#34;2025-11-08T18:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;priority&#34;</span>: <span style="color:#e6db74">&#34;medium&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;categories&#34;</span>: [<span style="color:#e6db74">&#34;groceries&#34;</span>, <span style="color:#e6db74">&#34;dairy&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;createdAt&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T10:05:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;updatedAt&#34;</span>: <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h2 id="update-task">Update Task</h2>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X PATCH http://localhost:8000/api/v1/tasks/660e8400-e29b-41d4-a716-446655440001 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;title&#34;: &#34;Buy organic milk&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;completed&#34;: true,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;priority&#34;: &#34;high&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }&#39;</span>
</span></span></code></pre></div><p><strong>Response (200 OK):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;660e8400-e29b-41d4-a716-446655440001&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;listId&#34;</span>: <span style="color:#e6db74">&#34;550e8400-e29b-41d4-a716-446655440000&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Buy organic milk&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;2 liters, skim&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;completed&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;dueDate&#34;</span>: <span style="color:#e6db74">&#34;2025-11-08T18:00:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;priority&#34;</span>: <span style="color:#e6db74">&#34;high&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;categories&#34;</span>: [<span style="color:#e6db74">&#34;groceries&#34;</span>, <span style="color:#e6db74">&#34;dairy&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;createdAt&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T10:05:00Z&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;updatedAt&#34;</span>: <span style="color:#e6db74">&#34;2025-11-07T11:30:00Z&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h2 id="delete-task">Delete Task</h2>
<p><strong>Request:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X DELETE http://localhost:8000/api/v1/tasks/660e8400-e29b-41d4-a716-446655440001
</span></span></code></pre></div><p><strong>Response (204 No Content):</strong></p>
<ul>
<li>Empty body</li>
<li>Task is permanently deleted</li>
</ul>
<p><strong>Error Responses:</strong></p>
<ul>
<li><code>400</code> - Invalid UUID format</li>
<li><code>404</code> - Task not found</li>
</ul>
<hr>
<h1 id="5-security-features">5. Security Features</h1>
<p>Built-in Protection Against Common Vulnerabilities</p>
<hr>
<h2 id="security-overview">Security Overview</h2>
<p><strong>What We Protect Against:</strong></p>
<ol>
<li><strong>SQL Injection</strong> ⚠️ Most critical web vulnerability</li>
<li><strong>XSS (Cross-Site Scripting)</strong> ⚠️ Code injection attacks</li>
<li><strong>Password Leaks</strong> ⚠️ Credential theft</li>
<li><strong>Token Theft</strong> ⚠️ Session hijacking</li>
<li><strong>Invalid Input</strong> ⚠️ Data corruption</li>
</ol>
<p><strong>How We Protect:</strong></p>
<ul>
<li>Prepared statements (SQL injection)</li>
<li>HTML entity escaping (XSS)</li>
<li>Bcrypt hashing (passwords)</li>
<li>Token blacklisting (logout security)</li>
<li>Input validation (data integrity)</li>
</ul>
<hr>
<h2 id="sql-injection-prevention">SQL Injection Prevention</h2>
<p><strong>❌ Bad (Vulnerable to SQL Injection):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>$query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;SELECT * FROM users WHERE username = &#39;</span><span style="color:#e6db74">$username</span><span style="color:#e6db74">&#39;&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Attacker input: &#34;admin&#39; OR &#39;1&#39;=&#39;1&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Result: Bypasses authentication!
</span></span></span></code></pre></div><p><strong>✅ Good (Using Prepared Statements):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>$stmt <span style="color:#f92672">=</span> $db<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">prepare</span>(<span style="color:#e6db74">&#34;SELECT * FROM users WHERE username = :username&#34;</span>);
</span></span><span style="display:flex;"><span>$stmt<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">execute</span>([<span style="color:#e6db74">&#39;:username&#39;</span> <span style="color:#f92672">=&gt;</span> $username]);
</span></span><span style="display:flex;"><span><span style="color:#75715e">// User input is treated as data, not code
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// No SQL injection possible!
</span></span></span></code></pre></div><p><strong>All database operations use prepared statements with PDO.</strong></p>
<hr>
<h2 id="xss-protection">XSS Protection</h2>
<p><strong>❌ Bad (Vulnerable to XSS):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;&lt;h1&gt;&#34;</span> <span style="color:#f92672">.</span> $_POST[<span style="color:#e6db74">&#39;name&#39;</span>] <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;&lt;/h1&gt;&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Attacker input: &#34;&lt;script&gt;alert(&#39;XSS&#39;)&lt;/script&gt;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Result: JavaScript executes!
</span></span></span></code></pre></div><p><strong>✅ Good (HTML Entity Escaping):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;&lt;h1&gt;&#34;</span> <span style="color:#f92672">.</span> <span style="color:#a6e22e">htmlspecialchars</span>($_POST[<span style="color:#e6db74">&#39;name&#39;</span>], <span style="color:#a6e22e">ENT_QUOTES</span>, <span style="color:#e6db74">&#39;UTF-8&#39;</span>) <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;&lt;/h1&gt;&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Attacker input: &#34;&lt;script&gt;alert(&#39;XSS&#39;)&lt;/script&gt;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Result: Displayed as text, not executed
</span></span></span></code></pre></div><p><strong>All user input is escaped before output.</strong></p>
<hr>
<h2 id="password-security">Password Security</h2>
<p><strong>Implementation:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#75715e">// Hashing on signup
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>$hashedPassword <span style="color:#f92672">=</span> <span style="color:#a6e22e">password_hash</span>($password, <span style="color:#a6e22e">PASSWORD_BCRYPT</span>, [<span style="color:#e6db74">&#39;cost&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">12</span>]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Verification on login
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">password_verify</span>($inputPassword, $storedHash)) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Password correct
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p><strong>Features:</strong></p>
<ul>
<li><strong>Bcrypt</strong> algorithm (industry standard)</li>
<li><strong>Cost factor 12</strong> (2^12 = 4096 iterations)</li>
<li><strong>Salt</strong> automatically generated and stored</li>
<li><strong>One-way</strong> hash (cannot be reversed)</li>
<li><strong>Slow</strong> by design (prevents brute force)</li>
</ul>
<p><strong>Passwords are NEVER:</strong></p>
<ul>
<li>Stored in plain text</li>
<li>Returned in API responses</li>
<li>Logged to files</li>
</ul>
<hr>
<h2 id="token-security">Token Security</h2>
<p><strong>Security Features:</strong></p>
<ol>
<li><strong>Signed</strong> with secret key (prevents tampering)</li>
<li><strong>Expiration</strong> after 1 hour (limits exposure)</li>
<li><strong>Blacklisting</strong> on logout (prevents reuse)</li>
<li><strong>Stateless</strong> (no server sessions to steal)</li>
</ol>
<p><strong>Token Validation:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#ae81ff">1.</span> <span style="color:#a6e22e">Check</span> <span style="color:#a6e22e">blacklist</span> <span style="color:#a6e22e">→</span> <span style="color:#a6e22e">Reject</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">blacklisted</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2.</span> <span style="color:#a6e22e">Verify</span> <span style="color:#a6e22e">signature</span> <span style="color:#a6e22e">→</span> <span style="color:#a6e22e">Reject</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">tampered</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3.</span> <span style="color:#a6e22e">Check</span> <span style="color:#a6e22e">expiration</span> <span style="color:#a6e22e">→</span> <span style="color:#a6e22e">Reject</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">expired</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4.</span> <span style="color:#a6e22e">Allow</span> <span style="color:#a6e22e">request</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">all</span> <span style="color:#a6e22e">pass</span>
</span></span></code></pre></div><hr>
<h2 id="input-validation">Input Validation</h2>
<p><strong>UUID Validation:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">preg_match</span>(<span style="color:#e6db74">&#39;/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i&#39;</span>, $id)) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">400</span>; <span style="color:#75715e">// Bad Request
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p><strong>String Validation:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>$name <span style="color:#f92672">=</span> <span style="color:#a6e22e">trim</span>($input[<span style="color:#e6db74">&#39;name&#39;</span>]); <span style="color:#75715e">// Remove whitespace
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">empty</span>($name)) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">400</span>; <span style="color:#75715e">// Cannot be empty
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">strlen</span>($name) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">255</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">400</span>; <span style="color:#75715e">// Too long
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p><strong>Enum Validation:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">in_array</span>($priority, [<span style="color:#e6db74">&#39;low&#39;</span>, <span style="color:#e6db74">&#39;medium&#39;</span>, <span style="color:#e6db74">&#39;high&#39;</span>])) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">400</span>; <span style="color:#75715e">// Invalid priority
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><hr>
<h2 id="error-response-format">Error Response Format</h2>
<p><strong>All errors return consistent JSON:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;error&#34;</span>: <span style="color:#e6db74">&#34;Human-readable error message&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;code&#34;</span>: <span style="color:#e6db74">&#34;ERROR_CODE&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;details&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;field&#34;</span>: <span style="color:#e6db74">&#34;Additional context&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>HTTP Status Codes:</strong></p>
<ul>
<li><code>200</code> - Success (GET/PATCH)</li>
<li><code>201</code> - Created (POST)</li>
<li><code>204</code> - No Content (DELETE)</li>
<li><code>400</code> - Bad Request (validation error)</li>
<li><code>401</code> - Unauthorized (auth error)</li>
<li><code>404</code> - Not Found</li>
<li><code>409</code> - Conflict (duplicate)</li>
<li><code>415</code> - Unsupported Media Type</li>
<li><code>500</code> - Internal Server Error</li>
</ul>
<hr>
<h1 id="6-testing--deployment">6. Testing &amp; Deployment</h1>
<p>How to Test and Deploy the API</p>
<hr>
<h2 id="local-setup">Local Setup</h2>
<p><strong>Prerequisites:</strong></p>
<ul>
<li>PHP 8.1 or higher</li>
<li>Composer (PHP package manager)</li>
<li>SQLite3</li>
</ul>
<p><strong>Installation Steps:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. Clone repository</span>
</span></span><span style="display:flex;"><span>git clone https://github.com/yourusername/NKU-640.git
</span></span><span style="display:flex;"><span>cd NKU-640/homework4/php-version
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. Install dependencies</span>
</span></span><span style="display:flex;"><span>composer install
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. Copy environment file</span>
</span></span><span style="display:flex;"><span>cp .env.example .env
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. Start development server</span>
</span></span><span style="display:flex;"><span>php -S localhost:8000 -t public
</span></span></code></pre></div><p><strong>Access at:</strong> http://localhost:8000</p>
<hr>
<h2 id="environment-configuration">Environment Configuration</h2>
<p><strong>Edit <code>.env</code> file:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Debug mode (show detailed errors)</span>
</span></span><span style="display:flex;"><span>DEBUG_MODE<span style="color:#f92672">=</span>true
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Log level (error, warning, info, debug)</span>
</span></span><span style="display:flex;"><span>LOG_LEVEL<span style="color:#f92672">=</span>debug
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Database path</span>
</span></span><span style="display:flex;"><span>DATABASE_PATH<span style="color:#f92672">=</span>data/todo.db
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># JWT configuration</span>
</span></span><span style="display:flex;"><span>JWT_SECRET<span style="color:#f92672">=</span>your-secret-key-change-in-production
</span></span><span style="display:flex;"><span>JWT_EXPIRY<span style="color:#f92672">=</span><span style="color:#ae81ff">3600</span>
</span></span></code></pre></div><p><strong>⚠️ Production Settings:</strong></p>
<ul>
<li>Set <code>DEBUG_MODE=false</code></li>
<li>Use strong random <code>JWT_SECRET</code> (32+ characters)</li>
<li>Keep <code>JWT_SECRET</code> secure (never commit to git)</li>
<li>Use HTTPS for all endpoints</li>
</ul>
<hr>
<h2 id="testing-with-curl">Testing with curl</h2>
<p><strong>Complete workflow script:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1. Sign up</span>
</span></span><span style="display:flex;"><span>SIGNUP<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>curl -s -X POST http://localhost:8000/api/v1/auth/signup <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{&#34;username&#34;:&#34;alice&#34;,&#34;email&#34;:&#34;alice@test.com&#34;,&#34;password&#34;:&#34;pass123456&#34;}&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>TOKEN<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>echo $SIGNUP | grep -o <span style="color:#e6db74">&#39;&#34;token&#34;:&#34;[^&#34;]*&#34;&#39;</span> | cut -d<span style="color:#e6db74">&#39;&#34;&#39;</span> -f4<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Token: </span>$TOKEN<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. Create list</span>
</span></span><span style="display:flex;"><span>LIST<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>curl -s -X POST http://localhost:8000/api/v1/lists <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{&#34;name&#34;:&#34;Groceries&#34;,&#34;description&#34;:&#34;Weekly shopping&#34;}&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>LIST_ID<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>echo $LIST | grep -o <span style="color:#e6db74">&#39;&#34;id&#34;:&#34;[^&#34;]*&#34;&#39;</span> | cut -d<span style="color:#e6db74">&#39;&#34;&#39;</span> -f4<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;List ID: </span>$LIST_ID<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><hr>
<h2 id="testing-with-curl-cont">Testing with curl (cont.)</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 3. Create task</span>
</span></span><span style="display:flex;"><span>curl -X POST http://localhost:8000/api/v1/lists/$LIST_ID/tasks <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -d <span style="color:#e6db74">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;title&#34;:&#34;Buy milk&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;priority&#34;:&#34;medium&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;categories&#34;:[&#34;groceries&#34;,&#34;dairy&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. Get all tasks</span>
</span></span><span style="display:flex;"><span>curl -X GET http://localhost:8000/api/v1/lists/$LIST_ID/tasks
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 5. Get profile (requires token)</span>
</span></span><span style="display:flex;"><span>curl -X GET http://localhost:8000/api/v1/users/profile <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Authorization: Bearer </span>$TOKEN<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 6. Logout</span>
</span></span><span style="display:flex;"><span>curl -X POST http://localhost:8000/api/v1/auth/logout <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -H <span style="color:#e6db74">&#34;Authorization: Bearer </span>$TOKEN<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><hr>
<h2 id="unit-testing">Unit Testing</h2>
<p><strong>Run tests with PHPUnit:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Run all tests</span>
</span></span><span style="display:flex;"><span>./vendor/bin/phpunit
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Run with coverage report</span>
</span></span><span style="display:flex;"><span>./vendor/bin/phpunit --coverage-html coverage
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Run specific test file</span>
</span></span><span style="display:flex;"><span>./vendor/bin/phpunit tests/ListControllerTest.php
</span></span></code></pre></div><p><strong>Test Coverage:</strong></p>
<ul>
<li>39 unit tests covering all endpoints</li>
<li>Authentication tests (signup, login, logout, profile)</li>
<li>List CRUD tests</li>
<li>Task CRUD tests</li>
<li>Validation tests</li>
<li>Error handling tests</li>
</ul>
<hr>
<h2 id="nginx-deployment">NGINX Deployment</h2>
<p><strong>NGINX Configuration:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server_name</span> <span style="color:#e6db74">yourdomain.com</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">root</span> <span style="color:#e6db74">/var/www/todo-api/public</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">index</span> <span style="color:#e6db74">index.php</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">try_files</span> $uri $uri/ <span style="color:#e6db74">/index.php?</span>$query_string;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">location</span> ~ <span style="color:#e6db74">\.php$</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">fastcgi_pass</span> <span style="color:#e6db74">unix:/var/run/php/php8.1-fpm.sock</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">fastcgi_index</span> <span style="color:#e6db74">index.php</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">fastcgi_param</span> <span style="color:#e6db74">SCRIPT_FILENAME</span> $document_root$fastcgi_script_name;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">include</span> <span style="color:#e6db74">fastcgi_params</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h2 id="nginx-deployment-steps">NGINX Deployment Steps</h2>
<p><strong>1. Install PHP and NGINX:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt update
</span></span><span style="display:flex;"><span>sudo apt install nginx php8.1-fpm php8.1-sqlite3 php8.1-mbstring
</span></span></code></pre></div><p><strong>2. Deploy code:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo mkdir -p /var/www/todo-api
</span></span><span style="display:flex;"><span>sudo cp -r * /var/www/todo-api/
</span></span><span style="display:flex;"><span>sudo chown -R www-data:www-data /var/www/todo-api
</span></span></code></pre></div><p><strong>3. Configure NGINX:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo nano /etc/nginx/sites-available/todo-api
</span></span><span style="display:flex;"><span>sudo ln -s /etc/nginx/sites-available/todo-api /etc/nginx/sites-enabled/
</span></span><span style="display:flex;"><span>sudo nginx -t
</span></span><span style="display:flex;"><span>sudo systemctl reload nginx
</span></span></code></pre></div><hr>
<h2 id="production-checklist">Production Checklist</h2>
<p><strong>Before deploying to production:</strong></p>
<p>✅ Set <code>DEBUG_MODE=false</code> in <code>.env</code>
✅ Use strong random <code>JWT_SECRET</code>
✅ Remove <code>.env</code> from git (use <code>.gitignore</code>)
✅ Enable HTTPS (SSL/TLS certificate)
✅ Set appropriate file permissions
✅ Configure CORS if needed
✅ Implement rate limiting
✅ Set up logging and monitoring
✅ Regular backups of database
✅ Update dependencies regularly</p>
<hr>
<h2 id="monitoring--logging">Monitoring &amp; Logging</h2>
<p><strong>Check logs:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Application logs</span>
</span></span><span style="display:flex;"><span>tail -f logs/app.log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># NGINX access logs</span>
</span></span><span style="display:flex;"><span>tail -f /var/log/nginx/access.log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># NGINX error logs</span>
</span></span><span style="display:flex;"><span>tail -f /var/log/nginx/error.log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># PHP-FPM logs</span>
</span></span><span style="display:flex;"><span>tail -f /var/log/php8.1-fpm.log
</span></span></code></pre></div><p><strong>Health check endpoint:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl http://localhost:8000/api/v1/health
</span></span></code></pre></div><p>Monitor: database, disk space, memory, PHP version</p>
<hr>
<h1 id="summary--best-practices">Summary &amp; Best Practices</h1>
<p>Key Takeaways</p>
<hr>
<h2 id="what-we-learned">What We Learned</h2>
<p><strong>API Design:</strong></p>
<ul>
<li>✅ RESTful principles (proper HTTP methods, status codes)</li>
<li>✅ Consistent endpoint structure</li>
<li>✅ Clear request/response formats</li>
<li>✅ Comprehensive error handling</li>
</ul>
<p><strong>Security:</strong></p>
<ul>
<li>✅ JWT authentication with blacklisting</li>
<li>✅ Bcrypt password hashing</li>
<li>✅ SQL injection prevention (prepared statements)</li>
<li>✅ XSS protection (HTML escaping)</li>
<li>✅ Input validation and sanitization</li>
</ul>
<p><strong>Development:</strong></p>
<ul>
<li>✅ Unit testing (39 tests)</li>
<li>✅ Environment configuration</li>
<li>✅ Logging and debugging</li>
</ul>
<hr>
<h2 id="best-practices">Best Practices</h2>
<p><strong>Do:</strong></p>
<ul>
<li>✅ Use prepared statements for all database queries</li>
<li>✅ Hash passwords with bcrypt</li>
<li>✅ Validate and sanitize all user input</li>
<li>✅ Return appropriate HTTP status codes</li>
<li>✅ Implement token expiration and blacklisting</li>
<li>✅ Write unit tests</li>
<li>✅ Use environment variables for secrets</li>
<li>✅ Log errors for debugging</li>
</ul>
<p><strong>Don&rsquo;t:</strong></p>
<ul>
<li>❌ Concatenate user input into SQL queries</li>
<li>❌ Store passwords in plain text</li>
<li>❌ Trust client input without validation</li>
<li>❌ Expose sensitive data in error messages</li>
<li>❌ Commit secrets to git</li>
<li>❌ Use debug mode in production</li>
</ul>
<hr>
<h2 id="resources">Resources</h2>
<p><strong>Documentation:</strong></p>
<ul>
<li><a href="API.md">API Reference</a> - Complete endpoint specification</li>
<li><a href="README.md">README</a> - Setup and quick start guide</li>
<li><a href="IMPLEMENTATION_SUMMARY.md">Implementation Summary</a> - Technical details</li>
</ul>
<p><strong>Code Repository:</strong></p>
<ul>
<li>GitHub: <a href="https://github.com/yourusername/NKU-640/tree/main/homework4/php-version">https://github.com/yourusername/NKU-640/tree/main/homework4/php-version</a></li>
</ul>
<p><strong>Technologies:</strong></p>
<ul>
<li><a href="https://www.php.net/docs.php">PHP Documentation</a></li>
<li><a href="https://jwt.io/">JWT.io</a> - JWT debugger</li>
<li><a href="https://phpunit.de/">PHPUnit</a> - Testing framework</li>
<li><a href="https://getcomposer.org/">Composer</a> - Dependency manager</li>
</ul>
<hr>
<h1 id="questions">Questions?</h1>
<p><strong>Thank you for following this tutorial!</strong></p>
<p>For questions or issues:</p>
<ul>
<li>Check the <a href="API.md">API Reference</a></li>
<li>Review the <a href="README.md">README</a></li>
<li>Examine test files in <code>tests/</code> directory</li>
<li>Consult the course materials</li>
</ul>
<p><strong>Happy coding! 🚀</strong></p>

    </main>
    <footer>
        <p>&copy; 2025 NKU 640 Documentation</p>
    </footer>
</body>
</html>